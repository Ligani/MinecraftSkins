## Запуск веб приложения

Самый быстрый способ запустить базу данных, бэкенд и фронтенд в единой связке:

```docker-compose up --build```

Frontend: http://localhost:8081

 Backend (Swagger): http://localhost:7258/swagger

 ## Миграции базы данных
Автоматически: В приложении настроен механизм context.Database.Migrate(), который применяет миграции из слоя Infrastructure при каждом старте контейнера или приложения.

## Формула финальной цены

Параметры:

Базовая маржа: 5% (0.05).

Фактор риска: 10−6 (0.000001) на единицу курса BTC.

Максимальная наценка: 30% (0.30).

Формула:

Margindynamic​=0.05+(RateBTC​×10^(−6))

Marginfinal​=min(Margindynamic​,0.30)

Pricefinal​=PriceUSD​×(1+Marginfinal​)

Результат округляется до 2 знаков после запятой.

## Архитектура приложения

Приложение разделено на четкие слои для обеспечения масштабируемости:

 Domain: Содержит базовые сущности и исключения (BusinessException).

Infrastructure: Работа с данными (EF Core, PostgreSQL), репозитории и внешние интеграции (CoinGecko API).

Services: Вся бизнес-логика (расчет цен, обработка покупок, диагностика курса), интерфейсы, DTO.

 Api: Контроллеры, обработка CORS и Middleware для автоматической идентификации покупателя по заголовку X-User-Id.

 ## Список API эндпоинтов
```
GET /api/skins — Получение каталога (с пагинацией и поиском).

GET /api/skins/{id} — Информация о конкретном скине.

POST /api/skins — Создание нового скина.

PUT /api/skins/{id} — Обновление данных скина.

DELETE /api/skins/{id} — Удаление скина.

GET /api/purchases — История покупок (с фильтрами mineOnly, from/to, skinId).

GET /api/purchases/{id} — Детали транзакции по ID.

POST /api/purchases — Оформление новой покупки.

DELETE /api/purchases/{id} — Удаление записи о покупке.

GET /api/exchange-rate — Текущий актуальный курс BTC к фиату.

GET /api/rates/btc-usd — Расширенная диагностика состояния поставщика курса.
```
